(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8494,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s="lineage-lit-state",l={savedCreators:["hemingway","carver","le-guin"],likedWorks:["cathedral","blood-meridian","dispossessed"],followedUsers:["user-2","user-5"],viewedCreators:[],streakData:{currentStreak:0,longestStreak:0,lastVisitDate:"",streakStartDate:""},achievements:[]},a=new Set,o=null;function i(){if(o)return o;try{let e=localStorage.getItem(s);o=e?{...l,...JSON.parse(e)}:{...l}}catch{o={...l}}return o}function d(e){let t={...i(),...e};o=t;try{localStorage.setItem(s,JSON.stringify(t))}catch{}a.forEach(e=>e(t))}let n=(0,r.createContext)(null);function c({children:e}){let[s,l]=(0,r.useState)(i);(0,r.useEffect)(()=>(l(i()),a.add(l),()=>a.delete(l)),[]);let o=(0,r.useCallback)(e=>{let t,r;return d({savedCreators:(r=(t=i()).savedCreators.includes(e))?t.savedCreators.filter(t=>t!==e):[...t.savedCreators,e]}),!r},[]),c=(0,r.useCallback)(e=>{let t,r;return d({likedWorks:(r=(t=i()).likedWorks.includes(e))?t.likedWorks.filter(t=>t!==e):[...t.likedWorks,e]}),!r},[]),u=(0,r.useCallback)(e=>{let t,r;return d({followedUsers:(r=(t=i()).followedUsers.includes(e))?t.followedUsers.filter(t=>t!==e):[...t.followedUsers,e]}),!r},[]),k=(0,r.useCallback)(e=>{let t;!(t=i()).viewedCreators.some(t=>t.id===e)&&d({viewedCreators:[...t.viewedCreators,{id:e,timestamp:Date.now()}]})},[]),C=(0,r.useCallback)(e=>{let t;return!(t=i()).achievements.some(t=>t.id===e)&&(d({achievements:[...t.achievements,{id:e,unlockedAt:Date.now()}]}),!0)},[]),v=(0,r.useCallback)(e=>s.savedCreators.includes(e),[s.savedCreators]),f=(0,r.useCallback)(e=>s.likedWorks.includes(e),[s.likedWorks]),w=(0,r.useCallback)(e=>s.followedUsers.includes(e),[s.followedUsers]);return(0,t.jsx)(n.Provider,{value:{state:s,toggleSavedCreator:o,toggleLikedWork:c,toggleFollowedUser:u,recordCreatorView:k,unlockAchievement:C,isCreatorSaved:v,isWorkLiked:f,isUserFollowed:w},children:e})}function u(){let e=(0,r.useContext)(n);if(!e)throw Error("usePersistence must be used inside PersistenceProvider");return e}e.s(["PersistenceProvider",()=>c,"usePersistence",()=>u],8494)}]);